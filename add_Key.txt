1.    GitHub Repository 접속: 프로젝트 GitHub 저장소로 이동합니다.

    Settings → Secrets and variables → Actions로 이동합니다.

    New repository secret 버튼을 클릭합니다.

        Name: DD_API_KEY

        Secret: 51d1b347e7d2687eb0e467f8f9bf8c6e (실제 API Key 값)

    Add secret을 눌러 저장합니다.

2.  CI/CD에서 Secret을 Terraform으로 전달 
github/workflows/main.yaml 파일을 수정하여, 
GitHub Secret을 Terraform이 사용할 수 있도록 환경 변수로 전달합니다.
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      # ... (checkout, gcloud auth 등 기존 스텝 유지) ...

      - name: 'Terraform Apply'
        run: terraform apply -auto-approve
        # ✅ GitHub Secret을 Terraform 변수로 전달
        env:
          TF_VAR_datadog_api_key: ${{ secrets.DD_API_KEY }}
          # TF_VAR_ 접두사는 Terraform이 자동으로 변수 값을 인식하게 함

4.#  Injection to Cloud run job 

terraform/gcp/variables.tf
variable "DD_API_KEY" {
  description = "Datadog API Key for sending logs."
  type        = string
  sensitive   = true # ✅ Terraform plan/apply 로그에 값이 노출되지 않도록 함
}
# terraform/gcp/main.tf

resource "google_cloud_run_v2_job" "log_generator_job" {
  # ... (기존 설정 유지) ...
  template {
    template {
      # ... (기존 service_account, containers 설정 유지) ...
      containers {
        image = var.image_url
        
        env {
          name  = "BUCKET_NAME" # GCS 버킷 이름 (주석 처리된 경우 다시 활성화)
          value = google_storage_bucket.log_data_bucket.name
        }
        
        # ✅ Datadog API Key를 환경 변수로 주입
        env {
          name  = "DD_API_KEY"
          value = var.DD_API_KEY
        }
      }
    }
  }
}